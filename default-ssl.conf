<IfModule mod_ssl.c>
        <VirtualHost _default_:443>
                ServerAdmin webmaster@localhost

                DocumentRoot /var/www/html

                ErrorLog ${APACHE_LOG_DIR}/error.log
                CustomLog ${APACHE_LOG_DIR}/access.log combined

                #   SSL Engine Switch:
                #   Enable/Disable SSL for this virtual host.
                SSLEngine on

                # --- INICIO DE LA MODIFICACIÓN TEST01 ---

                # 1. Certificado "malo" (SHA1, 400 días, IP en CN)
                # (Líneas originales comentadas)
                # SSLCertificateFile    /etc/ssl/certs/ssl-cert-snakeoil.pem
                # SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

                # <<< NUEVO: Apuntamos a nuestro certificado de test01
                SSLCertificateFile      /etc/apache2/my_certs/badcert.pem
                SSLCertificateKeyFile /etc/apache2/my_certs/badkey.pem

                # 2. Habilitar Protocolos Antiguos
                # <<< NUEVO: Forzamos la aceptación de TLS 1.0 y 1.1
                # LÍNEA NUEVA (CORREGIDA)
                SSLProtocol         -all +TLSv1 +TLSv1.1 +TLSv1.2

                # 3. Habilitar Cifrados Débiles (CBC/SHA1)
                # <<< NUEVO: Forzamos la aceptación de cifrados débiles (nombres de OpenSSL)
                SSLCipherSuite      'AES128-SHA:AES256-SHA:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA:DES-CBC3-SHA'

                # --- FIN DE LA MODIFICACIÓN TEST01 ---


                # El resto del archivo se deja por defecto
                
                <FilesMatch "\.(cgi|shtml|phtml|php)$">
                                SSLOptions +StdEnvVars
                </FilesMatch>
                <Directory /usr/lib/cgi-bin>
                                SSLOptions +StdEnvVars
                </Directory>

        </VirtualHost>
</IfModule>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet